<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Objective-C boilerplate generator — Extra DRY</title>
  <link href='http://fonts.googleapis.com/css?family=Pacifico' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=PT+Serif' rel='stylesheet' type='text/css'>
  <link href="master.css" rel="stylesheet" type="text/css" media="screen" charset="utf-8">
</head>

<body>
  <a href="http://github.com/andreyvit/xdry"><img style="position: absolute; top: 0; right: 0; border: 0;" src="http://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>

  <div id="container">

    <h1 id='objectivec_boilerplate_generator'>Objective-C boilerplate generator</h1>

<p>Run Extra D.R.Y. in your Objective-C project folder to automatically add (upon your request):</p>

<ul>
<li><code>@property</code>, <code>@synthesize</code>, field declarations,</li>

<li>initializing constructors,</li>

<li>missing release calls in dealloc,</li>

<li>initWithDictionary, dictionaryRepresentation based on the chosen fields.</li>
</ul>

<h2 id='installation'>Installation</h2>

<p>Install the command-line utility via RubyGems:</p>

<pre><code>sudo gem install xdry</code></pre>

<h2 id='basic_usage'>Basic Usage</h2>

<p>Tell XD.R.Y. which changes you want done using bang-commands. For example, add <code>!p</code> to a field declaration line to generate a property:</p>
<div class='example'>


<div class='highlight'><pre><code class='objc'><span class='c1'>// Foo.h</span>
<span class='k'>@interface</span> <span class='nc'>Foo</span> <span class='p'>{</span>
  <span class='n'>Bar</span> <span class='o'>*</span><span class='n'>value</span><span class='p'>;</span> <span class='o'>!</span><span class='n'>p</span>
<span class='p'>}</span>

<span class='k'>@end</span>

<span class='c1'>// Foo.m</span>
<span class='err'>@</span><span class='n'>implementation</span> <span class='n'>Foo</span>
<span class='k'>@end</span>
</code></pre>
</div>



<div class='highlight'><pre><code class='objc'><span class='c1'>// Foo.h</span>
<span class='k'>@interface</span> <span class='nc'>Foo</span> <span class='p'>{</span>
  <span class='n'>Bar</span> <span class='o'>*</span><span class='n'>value</span><span class='p'>;</span>
<span class='p'>}</span>

<span class='k'>@property</span><span class='p'>(</span><span class='n'>nonatomic</span><span class='p'>,</span> <span class='n'>retain</span><span class='p'>)</span> <span class='n'>Bar</span> <span class='o'>*</span><span class='n'>value</span><span class='p'>;</span>

<span class='k'>@end</span>

<span class='c1'>// Foo.m</span>
<span class='k'>@implementation</span> <span class='nc'>Foo</span>

<span class='k'>@synthesize</span> <span class='n'>value</span><span class='p'>;</span>

<span class='o'>-</span> <span class='p'>(</span><span class='kt'>void</span><span class='p'>)</span><span class='n'>dealloc</span> <span class='p'>{</span>
  <span class='p'>[</span><span class='n'>value</span> <span class='n'>release</span><span class='p'>],</span> <span class='n'>value</span> <span class='o'>=</span> <span class='nb'>nil</span><span class='p'>;</span>
  <span class='p'>[</span><span class='n'>super</span> <span class='n'>dealloc</span><span class='p'>];</span>
<span class='p'>}</span>

<span class='k'>@end</span>
</code></pre>
</div>


</div>
<p>To run XD.R.Y., open a Terminal, cd to your project folder and execute <code>xdry</code>:</p>

<pre><code>cd ~/Documents/HelloWorld
xdry</code></pre>

<h2 id='automatic_changes'>Automatic Changes</h2>

<p>Without any instructions from your side, XD.R.Y. automatically applies the following changes:</p>

<ul>
<li>Adds missing release calls to <code>dealloc</code> methods:</li>
</ul>
<div class='example'>


<div class='highlight'><pre><code class='objc'><span class='k'>@interface</span> <span class='nc'>Foo</span> <span class='p'>{</span>
  <span class='n'>NSString</span> <span class='o'>*</span><span class='n'>value</span><span class='p'>;</span>
<span class='p'>}</span>
<span class='k'>@end</span>

<span class='err'>@</span><span class='n'>implementation</span> <span class='n'>Foo</span>
<span class='k'>@end</span>
</code></pre>
</div>



<div class='highlight'><pre><code class='objc'><span class='k'>@interface</span> <span class='nc'>Foo</span> <span class='p'>{</span>
  <span class='n'>NSString</span> <span class='o'>*</span><span class='n'>value</span><span class='p'>;</span>
<span class='p'>}</span>
<span class='k'>@end</span>

<span class='err'>@</span><span class='n'>implementation</span> <span class='n'>Foo</span>

<span class='o'>-</span> <span class='p'>(</span><span class='kt'>void</span><span class='p'>)</span><span class='n'>dealloc</span> <span class='p'>{</span>
  <span class='p'>[</span><span class='n'>value</span> <span class='n'>release</span><span class='p'>],</span> <span class='n'>value</span> <span class='o'>=</span> <span class='nb'>nil</span><span class='p'>;</span>
  <span class='p'>[</span><span class='n'>super</span> <span class='n'>dealloc</span><span class='p'>];</span>
<span class='p'>}</span>

<span class='k'>@end</span>
</code></pre>
</div>


</div>
<ul>
<li>Adds missing <code>@synthesize</code> declarations for properties with no explicit accessor methods:</li>
</ul>
<div class='example'>


<div class='highlight'><pre><code class='objc'><span class='k'>@interface</span> <span class='nc'>Foo</span> <span class='p'>{</span>
  <span class='n'>NSString</span> <span class='o'>*</span><span class='n'>value</span><span class='p'>;</span>
<span class='p'>}</span>

<span class='k'>@property</span><span class='p'>(</span><span class='n'>nonatomic</span><span class='p'>,</span> <span class='n'>copy</span><span class='p'>)</span> <span class='n'>NSString</span> <span class='o'>*</span><span class='n'>value</span><span class='p'>;</span>

<span class='k'>@end</span>

<span class='k'>@implementation</span> <span class='nc'>Foo</span>
<span class='k'>@end</span>
</code></pre>
</div>



<div class='highlight'><pre><code class='objc'><span class='k'>@interface</span> <span class='nc'>Foo</span> <span class='p'>{</span>
  <span class='n'>NSString</span> <span class='o'>*</span><span class='n'>value</span><span class='p'>;</span>
<span class='p'>}</span>

<span class='k'>@property</span><span class='p'>(</span><span class='n'>nonatomic</span><span class='p'>,</span> <span class='n'>copy</span><span class='p'>)</span> <span class='n'>NSString</span> <span class='o'>*</span><span class='n'>value</span><span class='p'>;</span>

<span class='k'>@end</span>

<span class='k'>@implementation</span> <span class='nc'>Foo</span>

<span class='k'>@synthesize</span> <span class='n'>value</span><span class='p'>;</span>

<span class='k'>@end</span>
</code></pre>
</div>


</div>
<ul>
<li>Adds missing fields for declared properties:</li>
</ul>
<div class='example'>


<div class='highlight'><pre><code class='objc'><span class='k'>@interface</span> <span class='nc'>Foo</span> <span class='p'>{</span>
<span class='p'>}</span>

<span class='k'>@property</span><span class='p'>(</span><span class='n'>nonatomic</span><span class='p'>,</span> <span class='n'>copy</span><span class='p'>)</span> <span class='n'>NSString</span> <span class='o'>*</span><span class='n'>value</span><span class='p'>;</span>

<span class='k'>@end</span>
</code></pre>
</div>



<div class='highlight'><pre><code class='objc'><span class='k'>@interface</span> <span class='nc'>Foo</span> <span class='p'>{</span>
  <span class='n'>NSString</span> <span class='o'>*</span><span class='n'>value</span><span class='p'>;</span>
<span class='p'>}</span>

<span class='k'>@property</span><span class='p'>(</span><span class='n'>nonatomic</span><span class='p'>,</span> <span class='n'>copy</span><span class='p'>)</span> <span class='n'>NSString</span> <span class='o'>*</span><span class='n'>value</span><span class='p'>;</span>

<span class='k'>@end</span>
</code></pre>
</div>


</div>
<h2 id='properties_fields_constructors'>Properties, Fields, Constructors</h2>

<p><code>!p</code> — generate a property for the given field:</p>
<div class='example'>


<div class='highlight'><pre><code class='objc'><span class='k'>@interface</span> <span class='nc'>Foo</span> <span class='p'>{</span>
  <span class='n'>Bar</span> <span class='o'>*</span><span class='n'>value</span><span class='p'>;</span> <span class='o'>!</span><span class='n'>p</span>
<span class='p'>}</span>

<span class='k'>@end</span>

<span class='err'>@</span><span class='n'>implementation</span> <span class='n'>Foo</span>
<span class='k'>@end</span>
</code></pre>
</div>



<div class='highlight'><pre><code class='objc'><span class='k'>@interface</span> <span class='nc'>Foo</span> <span class='p'>{</span>
  <span class='n'>Bar</span> <span class='o'>*</span><span class='n'>value</span><span class='p'>;</span>
<span class='p'>}</span>

<span class='k'>@property</span><span class='p'>(</span><span class='n'>nonatomic</span><span class='p'>,</span> <span class='n'>retain</span><span class='p'>)</span> <span class='n'>Bar</span> <span class='o'>*</span><span class='n'>value</span><span class='p'>;</span>

<span class='k'>@end</span>

<span class='k'>@implementation</span> <span class='nc'>Foo</span>

<span class='k'>@synthesize</span> <span class='n'>value</span><span class='p'>;</span>

<span class='o'>-</span> <span class='p'>(</span><span class='kt'>void</span><span class='p'>)</span><span class='n'>dealloc</span> <span class='p'>{</span>
  <span class='p'>[</span><span class='n'>value</span> <span class='n'>release</span><span class='p'>],</span> <span class='n'>value</span> <span class='o'>=</span> <span class='nb'>nil</span><span class='p'>;</span>
  <span class='p'>[</span><span class='n'>super</span> <span class='n'>dealloc</span><span class='p'>];</span>
<span class='p'>}</span>

<span class='k'>@end</span>
</code></pre>
</div>


</div>
<p><code>!c</code> — generate an initializing constructor for the given field(s):</p>
<div class='example'>


<div class='highlight'><pre><code class='objc'><span class='k'>@interface</span> <span class='nc'>Foo</span> <span class='p'>{</span>
  <span class='n'>NSString</span> <span class='o'>*</span><span class='n'>_something</span><span class='p'>;</span> <span class='o'>!</span><span class='n'>c</span>
<span class='p'>}</span>
<span class='k'>@end</span>

<span class='err'>@</span><span class='n'>implementation</span> <span class='n'>Foo</span>
<span class='k'>@end</span>
</code></pre>
</div>



<div class='highlight'><pre><code class='objc'><span class='k'>@interface</span> <span class='nc'>Foo</span> <span class='p'>{</span>
  <span class='n'>NSString</span> <span class='o'>*</span><span class='n'>_something</span><span class='p'>;</span>
<span class='p'>}</span>

<span class='o'>-</span> <span class='p'>(</span><span class='kt'>id</span><span class='p'>)</span><span class='nl'>initWithSomething:</span><span class='p'>(</span><span class='n'>NSString</span> <span class='o'>*</span><span class='p'>)</span><span class='n'>something</span><span class='p'>;</span>

<span class='k'>@end</span>

<span class='k'>@implementation</span> <span class='nc'>Foo</span>

<span class='o'>-</span> <span class='p'>(</span><span class='kt'>id</span><span class='p'>)</span><span class='nl'>initWithSomething:</span><span class='p'>(</span><span class='n'>NSString</span> <span class='o'>*</span><span class='p'>)</span><span class='n'>something</span> <span class='p'>{</span>
  <span class='k'>if</span> <span class='p'>(</span><span class='n'>self</span> <span class='o'>=</span> <span class='p'>[</span><span class='n'>super</span> <span class='n'>init</span><span class='p'>])</span> <span class='p'>{</span>
    <span class='n'>_something</span> <span class='o'>=</span> <span class='p'>[</span><span class='n'>something</span> <span class='n'>copy</span><span class='p'>];</span>
  <span class='p'>}</span>
  <span class='k'>return</span> <span class='n'>self</span><span class='p'>;</span>
<span class='p'>}</span>

<span class='k'>@end</span>
</code></pre>
</div>


</div>
<h2 id='dictionary_coding'>Dictionary Coding</h2>

<p>XD.R.Y. can generate <code>initWithDictionary:(NSDictionary *)dictionary</code> method, useful for loading objects from a plist. Similarly, an <code>(NSDictionary *)dictionaryRepresentation</code> method is generated to produce a plist-friendly dictionary from an object.</p>

<p><code>// persistent</code> marks a block of fields to read from a dictionary / serialize into a dictionary:</p>
<div class='example'>


<div class='highlight'><pre><code class='objc'><span class='k'>@interface</span> <span class='nc'>Foo</span> <span class='p'>{</span>
  <span class='c1'>// persistent</span>
  <span class='n'>NSString</span> <span class='o'>*</span><span class='n'>_something</span><span class='p'>;</span>
<span class='p'>}</span>
<span class='k'>@end</span>

<span class='err'>@</span><span class='n'>implementation</span> <span class='n'>Foo</span>
<span class='k'>@end</span>
</code></pre>
</div>



<div class='highlight'><pre><code class='objc'><span class='k'>@interface</span> <span class='nc'>Foo</span> <span class='p'>{</span>
  <span class='c1'>// persistent</span>
  <span class='n'>NSString</span> <span class='o'>*</span><span class='n'>_something</span><span class='p'>;</span>
<span class='p'>}</span>
<span class='k'>@end</span>

<span class='cp'>#define SomethingKey @&quot;Something&quot;</span>

<span class='err'>@</span><span class='n'>implementation</span> <span class='n'>Foo</span>

<span class='o'>-</span> <span class='p'>(</span><span class='kt'>id</span><span class='p'>)</span><span class='nl'>initWithDictionary:</span><span class='p'>(</span><span class='n'>NSDictionary</span> <span class='o'>*</span><span class='p'>)</span><span class='n'>dictionary</span> <span class='p'>{</span>
  <span class='k'>if</span> <span class='p'>(</span><span class='n'>self</span> <span class='o'>=</span> <span class='p'>[</span><span class='n'>super</span> <span class='n'>init</span><span class='p'>])</span> <span class='p'>{</span>
    <span class='kt'>id</span> <span class='n'>somethingRaw</span> <span class='o'>=</span> <span class='p'>[</span><span class='n'>dictionary</span> <span class='nl'>objectForKey:</span><span class='n'>SomethingKey</span><span class='p'>];</span>
    <span class='k'>if</span> <span class='p'>(</span><span class='n'>somethingRaw</span> <span class='o'>!=</span> <span class='nb'>nil</span><span class='p'>)</span> <span class='p'>{</span>
      <span class='n'>_something</span> <span class='o'>=</span> <span class='p'>[</span><span class='n'>somethingRaw</span> <span class='n'>copy</span><span class='p'>];</span>
    <span class='p'>}</span>
  <span class='p'>}</span>
  <span class='k'>return</span> <span class='n'>self</span><span class='p'>;</span>
<span class='p'>}</span>

<span class='o'>-</span> <span class='p'>(</span><span class='n'>NSDictionary</span> <span class='o'>*</span><span class='p'>)</span><span class='n'>dictionaryRepresentation</span> <span class='p'>{</span>
  <span class='n'>NSMutableDictionary</span> <span class='o'>*</span><span class='n'>dictionary</span> <span class='o'>=</span> <span class='p'>[</span><span class='n'>NSMutableDictionary</span> <span class='n'>dictionary</span><span class='p'>];</span>
  <span class='p'>[</span><span class='n'>dictionary</span> <span class='nl'>setObject:</span><span class='n'>_something</span> <span class='nl'>forKey:</span><span class='n'>SomethingKey</span><span class='p'>];</span>
  <span class='k'>return</span> <span class='n'>dictionary</span><span class='p'>;</span>
<span class='p'>}</span>

<span class='k'>@end</span>
</code></pre>
</div>


</div>
<p>To correctly handle serialization and deserialization of arrays, you need to hint XD.R.Y. about the item type:</p>
<div class='example'>


<div class='highlight'><pre><code class='objc'><span class='k'>@interface</span> <span class='nc'>Foo</span> <span class='p'>{</span>
  <span class='c1'>// persistent</span>
  <span class='n'>NSArray</span> <span class='o'>*</span><span class='n'>_bars</span><span class='p'>;</span> <span class='c1'>// of Bar</span>
<span class='p'>}</span>
<span class='k'>@end</span>

<span class='err'>@</span><span class='n'>implementation</span> <span class='n'>Foo</span>
<span class='k'>@end</span>
</code></pre>
</div>



<div class='highlight'><pre><code class='objc'><span class='k'>@interface</span> <span class='nc'>Foo</span> <span class='p'>{</span>
  <span class='c1'>// persistent</span>
  <span class='n'>NSArray</span> <span class='o'>*</span><span class='n'>_bars</span><span class='p'>;</span> <span class='c1'>// of Bar</span>
<span class='p'>}</span>
<span class='k'>@end</span>

<span class='err'>@</span><span class='n'>implementation</span> <span class='n'>Foo</span>
<span class='cp'>#define BarsKey @&quot;Bars&quot;</span>

<span class='err'>@</span><span class='n'>implementation</span> <span class='n'>Foo</span>

<span class='o'>-</span> <span class='p'>(</span><span class='kt'>id</span><span class='p'>)</span><span class='nl'>initWithDictionary:</span><span class='p'>(</span><span class='n'>NSDictionary</span> <span class='o'>*</span><span class='p'>)</span><span class='n'>dictionary</span> <span class='p'>{</span>
  <span class='k'>if</span> <span class='p'>(</span><span class='n'>self</span> <span class='o'>=</span> <span class='p'>[</span><span class='n'>super</span> <span class='n'>init</span><span class='p'>])</span> <span class='p'>{</span>
    <span class='kt'>id</span> <span class='n'>barsRaw</span> <span class='o'>=</span> <span class='p'>[</span><span class='n'>dictionary</span> <span class='nl'>objectForKey:</span><span class='n'>BarsKey</span><span class='p'>];</span>
    <span class='k'>if</span> <span class='p'>(</span><span class='n'>barsRaw</span> <span class='o'>!=</span> <span class='nb'>nil</span><span class='p'>)</span> <span class='p'>{</span>
      <span class='n'>NSMutableArray</span> <span class='o'>*</span><span class='n'>barsArray</span> <span class='o'>=</span> <span class='p'>[[</span><span class='n'>NSMutableArray</span> <span class='n'>alloc</span><span class='p'>]</span> <span class='n'>init</span><span class='p'>];</span>
      <span class='k'>for</span> <span class='p'>(</span><span class='n'>NSDictionary</span> <span class='o'>*</span><span class='n'>barsItemDict</span> <span class='k'>in</span> <span class='p'>(</span><span class='n'>NSArray</span> <span class='o'>*</span><span class='p'>)</span> <span class='n'>barsRaw</span><span class='p'>)</span> <span class='p'>{</span>
        <span class='n'>Bar</span> <span class='o'>*</span><span class='n'>barsItem</span> <span class='o'>=</span> <span class='p'>[[</span><span class='n'>Bar</span> <span class='n'>alloc</span><span class='p'>]</span> <span class='nl'>initWithDictionary:</span><span class='n'>barsItemDict</span><span class='p'>];</span>
        <span class='p'>[</span><span class='n'>barsArray</span> <span class='nl'>addObject:</span><span class='n'>barsItem</span><span class='p'>];</span>
        <span class='p'>[</span><span class='n'>barsItem</span> <span class='n'>release</span><span class='p'>];</span>
      <span class='p'>}</span>
      <span class='n'>_bars</span> <span class='o'>=</span> <span class='n'>barsArray</span><span class='p'>;</span>
    <span class='p'>}</span>
  <span class='p'>}</span>
  <span class='k'>return</span> <span class='n'>self</span><span class='p'>;</span>
<span class='p'>}</span>

<span class='o'>-</span> <span class='p'>(</span><span class='n'>NSDictionary</span> <span class='o'>*</span><span class='p'>)</span><span class='n'>dictionaryRepresentation</span> <span class='p'>{</span>
  <span class='n'>NSMutableDictionary</span> <span class='o'>*</span><span class='n'>dictionary</span> <span class='o'>=</span> <span class='p'>[</span><span class='n'>NSMutableDictionary</span> <span class='n'>dictionary</span><span class='p'>];</span>
  <span class='n'>NSMutableArray</span> <span class='o'>*</span><span class='n'>barsArray</span> <span class='o'>=</span> <span class='p'>[</span><span class='n'>NSMutableArray</span> <span class='n'>array</span><span class='p'>];</span>
  <span class='k'>for</span> <span class='p'>(</span><span class='n'>Bar</span> <span class='o'>*</span><span class='n'>barsItem</span> <span class='k'>in</span> <span class='n'>_bars</span><span class='p'>)</span> <span class='p'>{</span>
    <span class='p'>[</span><span class='n'>barsArray</span> <span class='nl'>addObject:</span><span class='p'>[</span><span class='n'>barsItem</span> <span class='n'>dictionaryRepresentation</span><span class='p'>]];</span>
  <span class='p'>}</span>
  <span class='p'>[</span><span class='n'>dictionary</span> <span class='nl'>setObject:</span><span class='n'>barsArray</span> <span class='nl'>forKey:</span><span class='n'>BarsKey</span><span class='p'>];</span>
  <span class='k'>return</span> <span class='n'>dictionary</span><span class='p'>;</span>
<span class='p'>}</span>

<span class='o'>-</span> <span class='p'>(</span><span class='kt'>void</span><span class='p'>)</span><span class='n'>dealloc</span> <span class='p'>{</span>
  <span class='p'>[</span><span class='n'>_bars</span> <span class='n'>release</span><span class='p'>],</span> <span class='n'>_bars</span> <span class='o'>=</span> <span class='nb'>nil</span><span class='p'>;</span>
  <span class='p'>[</span><span class='n'>super</span> <span class='n'>dealloc</span><span class='p'>];</span>
<span class='p'>}</span>

<span class='k'>@end</span>
</code></pre>
</div>


</div>
<h2 id='license_and_authors'>License and Authors</h2>

<p>Copyright 2010–2011, Andrey Tarantsov.</p>

<p>Distributed under the MIT license, see LICENSE file for details.</p>

<h2 id='contributing'>Contributing</h2>

<p>Fork the source on GitHub: <a href='http://github.com/andreyvit/xdry'>http://github.com/andreyvit/xdry</a>.</p>

<p>Add a test, make a change, verify that all tests pass, update the docs in site/index.md, send me a pull request.</p>

<p>Testing prerequisites:</p>

<pre><code>sudo gem install rake rspec diff-lcs</code></pre>

<p>The simplest way to run the tests:</p>

<pre><code>rake</code></pre>

<p>Get a nice colorful table with test results:</p>

<pre><code>rspec -b -c -fd .</code></pre>

<p>When something goes wrong, you want a verbose output:</p>

<pre><code>VERBOSE=1 rake</code></pre>

<p>Site (documentation) prerequisites:</p>

<pre><code>sudo gem install jekyll
sudo easy_install Pygments</code></pre>

<p>Regenerate the site using:</p>

<pre><code>rake site:build</code></pre>

<p>(open site/_site/index.html to view the results). Don&#8217;t bother with gh-pages branch.</p>

  </div>

  <script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-861679-14");
pageTracker._trackPageview();
} catch(err) {}</script>
</body>
</html>
